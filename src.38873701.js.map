{"version":3,"sources":["js/apiService.js","js/getRefs.js","js/searchEvent.js","js/grid.js","js/backToTop.js","index.js"],"names":["fetchEvent","API_KEY","BASE_URL","event","page","response","fetch","dataResponse","json","events","_embedded","getRefs","formRef","document","querySelector","btnTestRef","mainListRef","backToTopBtn","refs","states","query","onSearchEvent","e","preventDefault","currentTarget","elements","value","console","log","then","createMarkup","catch","error","innerHTML","onTestNextPage","data","images","map","el","insertAdjacentHTML","url","name","dates","start","localDate","timezone","startPageLoad","trackScroll","scrolled","window","pageYOffset","coords","documentElement","clientHeight","classList","add","remove","backToTop","scrollBy","setTimeout","addEventListener"],"mappings":";;;AAYeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAZf,MAAMC,EAAU,mCACVC,EAAW,4CAEjB,eAAeF,EAAWG,EAAOC,GACzBC,MAAAA,QAAiBC,SAClBJ,oBAA2BC,UAAcC,6BAAgCH,KAExEM,QAAqBF,EAASG,OAE7BC,aADcF,EAAaG,UAIrBV,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACDAW,aAXf,SAASA,IACA,MAAA,CACLC,QAASC,SAASC,cAAc,YAChCC,WAAYF,SAASC,cAAc,QAEnCE,YAAaH,SAASC,cAAc,cAEpCG,aAAcJ,SAASC,cAAc,iBAI1BH,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAAAA,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACsBd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,EAAA,QAAA,eAAA,EAAA,QAAA,YAAA,EAjCD,IAAA,EAAA,EAAA,QAAA,iBACA,EAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,WA+BC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA7BD,MAAMO,GAAO,EAAb,EAAA,WAEMC,EAAS,CACbf,KAAM,EACNgB,MAAO,IAGT,SAASC,EAAcC,GACrBA,EAAEC,iBACFJ,EAAOC,MAAQE,EAAEE,cAAcC,SAASL,MAAMM,MAC9CP,EAAOf,KAAO,EAEduB,QAAQC,IAAIT,EAAOC,QAERD,EAAAA,EAAAA,SAAAA,EAAOC,MAAOD,EAAOf,MAC7ByB,KAAKC,EADR,SAEGC,MAAMC,GAASL,QAAQC,IAAII,IAE9Bb,EAAOf,MAAQ,EACfc,EAAKF,YAAYiB,UAAY,GAI/B,SAASC,KACIf,EAAAA,EAAAA,SAAAA,EAAOC,MAAOD,EAAOf,MAC7ByB,KAAKC,EADR,SAEGC,MAAMC,GAASL,QAAQC,IAAII,IAE9Bb,EAAOf,MAAQ,EAChB,QAAA,OAAA;;ACFc0B,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA/Bf,IAAA,EAAA,EAAA,QAAA,qBACA,EAAA,EAAA,QAAA,cACA,EAAA,QAAA,iBA6BeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA3Bf,MAAMZ,GAAO,EAAb,EAAA,WAEA,SAASY,EAAaK,GACpBR,QAAQC,IAAIO,EAAK1B,OAAO,GAAG2B,QAC3BD,EAAK1B,OAAO4B,IAAIC,IACdpB,EAAKF,YAAYuB,mBACf,6EAEkCD,EAAGF,OAAO,GAAGI,+CACrBF,EAAGG,2CACJH,EAAGI,MAAMC,MAAMC,mDACXN,EAAGI,MAAMG,iCAM5C,SAASC,KACI3B,EAAAA,EAAAA,SAAAA,EAAOC,OAAAA,MAAOD,EAAOf,OAAAA,MAC7ByB,KAAKC,GACLC,MAAMC,GAASL,QAAQC,IAAII,IAEvB5B,EAAAA,OAAAA,MAAQ,EAGjB0C,IAEehB,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACXd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAAA,QAAA,UAAA,EApBD,IAAA,EAAA,EAAA,QAAA,cAoBC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAnBD,MAAMZ,GAAO,EAAb,EAAA,WAEO,SAAS6B,IACVC,IAAAA,EAAWC,OAAOC,YAClBC,EAAStC,SAASuC,gBAAgBC,aAElCL,EAAWG,GACbjC,EAAKD,aAAaqC,UAAUC,IAAI,oBAE9BP,EAAWG,GACbjC,EAAKD,aAAaqC,UAAUE,OAAO,oBAIhC,SAASC,IACVR,OAAOC,YAAc,IACvBD,OAAOS,SAAS,GAAI,IACpBC,WAAWF,EAAW;;ACD1B,aAjBA,QAAA,oBAEA,IAAA,EAAA,EAAA,QAAA,iBAEA,EAAA,QAAA,kBAEA,EAAA,EAAA,QAAA,iBACA,EAAA,QAAA,oBAUA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GARA,MAAMvC,GAAO,EAAb,EAAA,WAIAA,EAAKN,QAAQgD,iBAAiB,SAAUvC,EAAxC,eACAH,EAAKH,WAAW6C,iBAAiB,QAAS1B,EAA1C,gBAEAhB,EAAKD,aAAa2C,iBAAiB,QAASH,EAA5C,WACAR,OAAOW,iBAAiB,SAAUb,EAAlC","file":"src.38873701.js","sourceRoot":"../src","sourcesContent":["const API_KEY = 'CQP9dthjPXqIe7ApjGu3SzKFu5V4QuaK';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2';\n\nasync function fetchEvent(event, page) {\n  const response = await fetch(\n    `${BASE_URL}/events?keyword=${event}&page=${page}&size=20&locale=*&apikey=${API_KEY}`,\n  );\n  const dataResponse = await response.json();\n  const events = await dataResponse._embedded;\n  return events;\n}\n\nexport default fetchEvent;\n","function getRefs() {\n  return {\n    formRef: document.querySelector('#js-form'),\n    btnTestRef: document.querySelector('.btn'), // ссылка на тестовую кнопку\n\n    mainListRef: document.querySelector('.main-list'),\n\n    backToTopBtn: document.querySelector('.back-to-top'),\n  };\n}\n\nexport default getRefs;\n","import fetchEvent from './apiService';\nimport getRefs from './getRefs';\nimport createMarkup from './grid';\n\nconst refs = getRefs();\n\nconst states = {\n  page: 1,\n  query: '',\n};\n\nfunction onSearchEvent(e) {\n  e.preventDefault();\n  states.query = e.currentTarget.elements.query.value;\n  states.page = 1;\n\n  console.log(states.query);\n\n  fetchEvent(states.query, states.page)\n    .then(createMarkup)\n    .catch(error => console.log(error));\n\n  states.page += 1;\n  refs.mainListRef.innerHTML = '';\n}\n\n// тестовая функция для получения нумерованый страниц с API\nfunction onTestNextPage() {\n  fetchEvent(states.query, states.page)\n    .then(createMarkup)\n    .catch(error => console.log(error));\n\n  states.page += 1;\n}\n\nexport { onSearchEvent, onTestNextPage, states };\n","import fetchEvent from '../js/apiService';\nimport getRefs from './getRefs';\nimport { states } from './searchEvent';\n\nconst refs = getRefs();\n\nfunction createMarkup(data) {\n  console.log(data.events[0].images);\n  data.events.map(el => {\n    refs.mainListRef.insertAdjacentHTML(\n      'beforeend',\n      `<li class=\"main-item\">\n        <img class=\"main-poster\" src=\"${el.images[0].url}\" alt=\"\">\n        <h2 class=\"main-name\">${el.name}</h2>\n        <p class=\"main-date\">${el.dates.start.localDate}</p>\n        <p class=\"main-location\">${el.dates.timezone}</p>\n        </li>`,\n    );\n  });\n}\n\nfunction startPageLoad() {\n  fetchEvent(states.query, states.page)\n    .then(createMarkup)\n    .catch(error => console.log(error));\n\n  states.page += 1;\n}\n\nstartPageLoad();\n\nexport default createMarkup;\n","import getRefs from './getRefs';\nconst refs = getRefs();\n\nexport function trackScroll() {\n  let scrolled = window.pageYOffset;\n  let coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    refs.backToTopBtn.classList.add('back-to-top-show');\n  }\n  if (scrolled < coords) {\n    refs.backToTopBtn.classList.remove('back-to-top-show');\n  }\n}\n\nexport function backToTop() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -50);\n    setTimeout(backToTop, 50);\n  }\n}\n\n","import './sass/main.scss';\n\nimport createMarkup from './js/grid.js';\n\nimport { trackScroll, backToTop } from './js/backToTop';\n\nimport getRefs from './js/getRefs';\nimport { onSearchEvent, onTestNextPage } from './js/searchEvent';\n\nconst refs = getRefs();\n\n// import './js/modal'; // закомментировал чтобы не мешала ошибка\n\nrefs.formRef.addEventListener('submit', onSearchEvent);\nrefs.btnTestRef.addEventListener('click', onTestNextPage); // слушатель на тестовую кнопку\n\nrefs.backToTopBtn.addEventListener('click', backToTop);\nwindow.addEventListener('scroll', trackScroll);\n"]}