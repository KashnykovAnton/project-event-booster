{"version":3,"sources":["js/apiService.js","js/grid.js","js/getRefs.js","js/backToTop.js","js/searchEvent.js","js/modal.js","index.js"],"names":["fetchEvent","API_KEY","BASE_URL","event","page","response","fetch","dataResponse","json","events","_embedded","mainListRef","document","querySelector","createMarkup","data","console","log","images","map","el","insertAdjacentHTML","url","name","dates","start","localDate","timezone","then","getRefs","formRef","btnTestRef","backToTopBtn","refs","trackScroll","scrolled","window","pageYOffset","coords","documentElement","clientHeight","classList","add","remove","backToTop","scrollBy","setTimeout","states","query","onSearchEvent","e","preventDefault","currentTarget","elements","value","catch","onTestNextPage","ref","galleryList","modalOverlay","closeBtn","modalLightBox","onModalOpen","closeModalESC","key","closeModal","closeModalOverlay","target","addEventListener"],"mappings":"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","file":"src.7fc37b76.js","sourceRoot":"../src","sourcesContent":["const API_KEY = 'CQP9dthjPXqIe7ApjGu3SzKFu5V4QuaK';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2';\n\nasync function fetchEvent(event, page) {\n  const response = await fetch(\n    `${BASE_URL}/events?keyword=${event}&page=${page}&size=20&locale=*&apikey=${API_KEY}`,\n  );\n  const dataResponse = await response.json();\n  const events = await dataResponse._embedded;\n  return events;\n}\n\nexport default fetchEvent;\n","import fetchEvent from '../js/apiService'\n\nconst mainListRef = document.querySelector('.main-list')\n\nfunction createMarkup(data) {\n    console.log(data.events[0].images)\n    data.events.map(el => { \n        mainListRef.insertAdjacentHTML('beforeend', `<li class=\"main-item\">\n        <img class=\"main-poster\" src=\"${el.images[0].url}\" alt=\"\">\n        <h2 class=\"main-name\">${el.name}</h2>\n        <p class=\"main-date\">${el.dates.start.localDate}</p>\n        <p class=\"main-location\">${el.dates.timezone}</p>\n        </li>`)\n     })\n}\n\nfetchEvent().then(createMarkup)","function getRefs() {\n  return {\n\n    formRef: document.querySelector('#js-form'),\n    btnTestRef: document.querySelector('.btn'), // ссылка на тестовую кнопку\n    \n    backToTopBtn: document.querySelector('.back-to-top'),\n\n  };\n}\n\nexport default getRefs;\n","import getRefs from './getRefs';\nconst refs = getRefs();\n\nexport function trackScroll() {\n  let scrolled = window.pageYOffset;\n  let coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    refs.backToTopBtn.classList.add('back-to-top-show');\n  }\n  if (scrolled < coords) {\n    refs.backToTopBtn.classList.remove('back-to-top-show');\n  }\n}\n\nexport function backToTop() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -50);\n    setTimeout(backToTop, 50);\n  }\n}\n\n","import fetchEvent from './apiService';\n\nconst states = {\n  page: 1,\n  query: '',\n};\n\nfunction onSearchEvent(e) {\n  e.preventDefault();\n  states.query = e.currentTarget.elements.query.value;\n  states.page = 1;\n\n  console.log(states.query);\n\n  fetchEvent(states.query, states.page)\n    .then(events => console.log(events))\n    .catch();\n  states.page += 1;\n}\n\n// тестовая функция для получения нумерованый страниц с API\nfunction onTestNextPage() {\n  fetchEvent(states.query, states.page)\n    .then(events => console.log(events))\n    .catch();\n\n  states.page += 1;\n}\n\nexport { onSearchEvent, onTestNextPage };\n","\n//===================================================\nconst ref = {\n    galleryList: document.querySelector('.main-list'),\n    modalOverlay: document.querySelector('.modal__backdrop'),\n    closeBtn: document.querySelector('[data-action=\"close-lightbox\"]'),\n    modalLightBox: document.querySelector('.modal__lightbox'),\n}\n\n//====================================================\nref.galleryList.addEventListener('click', onModalOpen);\nref.closeBtn.addEventListener('click', closeModal);\nref.modalOverlay.addEventListener('click', closeModalOverlay);\nwindow.addEventListener('keydown', closeModalESC);\n\n\n//====================================================\nfunction onModalOpen(e) {\n    e.preventDefault();\nref.modalLightBox.classList.add('is-open');\n\n    \n}\nfunction closeModalESC(event) {\n    if (event.key === 'Escape') {\n        closeModal(event);\n    }\n};\n\n\nfunction closeModalOverlay(event) {\n    if (event.target === event.currentTarget) {\n        closeModal();\n    }\n};\n\n\nfunction closeModal() {\n    ref.modalLightBox.classList.remove('is-open');   \n};\n//====================================================","import './sass/main.scss';\n\nimport './js/grid.js'\n\nimport {trackScroll, backToTop} from './js/backToTop';\n\nimport getRefs from './js/getRefs';\nimport { onSearchEvent, onTestNextPage } from './js/searchEvent';\n\nconst refs = getRefs();\nimport './js/modal';\n\n\nrefs.formRef.addEventListener('submit', onSearchEvent);\nrefs.btnTestRef.addEventListener('click', onTestNextPage); // слушатель на тестовую кнопку\n\nrefs.backToTopBtn.addEventListener('click', backToTop);\nwindow.addEventListener('scroll', trackScroll);\n\n"]}